(this.webpackJsonpptms=this.webpackJsonpptms||[]).push([[59],{707:function(e,t,_){"use strict";var a=_(0),n=_.n(a),r=_(248);t.a=n.a.memo((function(e){return n.a.createElement("div",null,n.a.createElement(r.a,{title:e.title,onClose:e.onClose,children:e.children,closeTxt:e.closeTxt,confirmTxt:e.confirmTxt,onConfirm:e.onConfirm,isConfirm:!0,isopen:e.isopen,closeIcon:e.closeIcon,openIcon:e.openIcon,closeButtonCss:e.closeButtonCss,confirmButtonCss:e.confirmButtonCss},e.children))}))},710:function(e,t,_){},725:function(module,__webpack_exports__,__webpack_require__){"use strict";var D_DT_ptmsApplication_dev_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(12),D_DT_ptmsApplication_dev_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(41),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__),formik__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(647),_material_ui_lab_Autocomplete__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(817),_material_ui_core__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(350),_material_ui_core__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(588),_material_ui_core__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(802),_autocomplete_css__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(710),_autocomplete_css__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(_autocomplete_css__WEBPACK_IMPORTED_MODULE_8__),_common_HttpService__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(138),AppAutoCompleteAsyc=function AppAutoCompleteAsyc(_ref){var options=_ref.options,_ref$required=_ref.required,required=void 0!==_ref$required&&_ref$required,name=_ref.name,label=_ref.label,helperText=_ref.helperText,_ref$type=_ref.type,type=void 0===_ref$type?"text":_ref$type,remoteUrl=_ref.remoteUrl,kvMapping=_ref.kvMapping,onSelect=_ref.onSelect,_useState=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)({q:"",timerId:null,dataset:[]}),_useState2=Object(D_DT_ptmsApplication_dev_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(_useState,2),opts=_useState2[0],setOpts=_useState2[1],_useState3=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)(!1),_useState4=Object(D_DT_ptmsApplication_dev_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(_useState3,2),loading=_useState4[0],setLoading=_useState4[1],_useState5=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)(!1),_useState6=Object(D_DT_ptmsApplication_dev_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(_useState5,2),refresh=_useState6[0],setRefresh=_useState6[1],renders=react__WEBPACK_IMPORTED_MODULE_2___default.a.useRef(0),intializeList=function intializeList(){if(options&&options.length>0){var ds=options;kvMapping&&(ds=options.map((function(opt){var labEle="opt."+kvMapping.label,labelv=eval(labEle),valEle="opt."+kvMapping.value,val=eval(valEle);return{label:labelv,value:val}}))),setOpts({q:"",dataset:ds,timerId:null}),console.log(ds)}};return Object(react__WEBPACK_IMPORTED_MODULE_2__.useEffect)((function(){}),[]),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_2___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(formik__WEBPACK_IMPORTED_MODULE_3__.b,{name:name},(function(_ref2){var form=_ref2.form,field=_ref2.field,meta=_ref2.meta,setFieldValue=form.setFieldValue,timerId=null,autocompleteSearch=function autocompleteSearch(value){var qurl;setLoading(!0),qurl=-1===remoteUrl.indexOf("?")?remoteUrl+"?q="+"".concat(value):remoteUrl+"&q="+"".concat(value),console.log("url::::",qurl),Object(_common_HttpService__WEBPACK_IMPORTED_MODULE_9__.a)({url:qurl},!1).then((function(e){var dItems=[];console.log(e),dItems=e.map((function(ele){var labEle="ele."+kvMapping.label,labelv=eval(labEle),valEle="ele."+kvMapping.value,val=eval(valEle);return{label:labelv,value:val}})),console.log(dItems),setOpts((function(e){return Object(D_DT_ptmsApplication_dev_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)(Object(D_DT_ptmsApplication_dev_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)({},e),{},{dataset:dItems})})),setLoading(!1)})).catch((function(e){setLoading(!1);var t=[{label:"Unable to Fetch the data: "+e,value:"-3333"}];setOpts((function(e){return Object(D_DT_ptmsApplication_dev_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)(Object(D_DT_ptmsApplication_dev_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)({},e),{},{dataset:t})}))}))},handleChange=function(e,t){setRefresh(!0),null!=t?(setFieldValue(name,t.value),onSelect(name,t.value,t.label)):(e.target.value="",setFieldValue(name,""),onSelect(name,"",""))},onKeyPressInput=function(e,t,_){"click"!==e.type&&(setRefresh(!0),remoteUrl&&""!==t&&(clearTimeout(opts.timerId),timerId=setTimeout((function(){autocompleteSearch(t)}),200),setOpts((function(e){return Object(D_DT_ptmsApplication_dev_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)(Object(D_DT_ptmsApplication_dev_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)({},e),{},{q:t,timerId:timerId})}))))},handleClose=function(e,t){remoteUrl&&setOpts((function(e){return Object(D_DT_ptmsApplication_dev_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)(Object(D_DT_ptmsApplication_dev_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)({},e),{},{dataset:[]})})),console.log("closing"),setRefresh(!1)};return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_2___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_material_ui_lab_Autocomplete__WEBPACK_IMPORTED_MODULE_4__.a,{freeSolo:!0,autoComplete:!1,options:opts.dataset,renderOption:function(e){return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_5__.a,{variant:"body2"},e.label)},getOptionLabel:function(e){return e.label},getOptionSelected:function(e,t){return!0},onChange:handleChange,onInputChange:onKeyPressInput,onClose:handleClose,renderInput:function(e){return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_2___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div",{className:"autoSelect-txt-div"},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__.a,Object.assign({autoComplete:"false"},e,{label:label,variant:"outlined",margin:"dense",InputLabelProps:{style:{fontSize:"16px"}}})),loading&&react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_7__.a,{className:"auto-search-loading-icon"})))}}))})))};__webpack_exports__.a=react__WEBPACK_IMPORTED_MODULE_2___default.a.memo(AppAutoCompleteAsyc)},726:function(e,t,_){"use strict";var a=_(114),n=_(115),r=_(138),l=_(160),o=function(){function e(){Object(a.a)(this,e)}return Object(n.a)(e,[{key:"groupAndSendForApproval",value:function(e){var t={url:l.N,body:e};return Object(r.c)(t,!0).catch((function(e){return e}))}},{key:"fetchTrucksForUserTypes",value:function(){var e={url:"".concat(l.J)};return Object(r.a)(e,!1)}},{key:"fetchTrucksForTransporter",value:function(e){var t={url:"".concat(l.K,"?transporter=").concat(e)};return Object(r.a)(t,!1)}},{key:"sendJobForApproval",value:function(e){var t={url:l.ab,body:e};return Object(r.c)(t,!0).catch((function(e){return e}))}},{key:"fetchTransporters",value:function(){var e={url:l.I};return Object(r.a)(e,!1).catch((function(e){return e}))}}]),e}();t.a=new o},836:function(e,t,_){"use strict";_.d(t,"a",(function(){return f}));var a=_(41),n=_(651),r=_(0),l=_.n(r),o=_(5),c=_(597),i=_(599),s=_(775),u=_(652),p=_.n(u),m=_(636),E=_(25),d=Object(o.a)((function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:"red"}}}))((function(e){e.children;var t=e.classes,_=e.onClose;Object(n.a)(e,["children","classes","onClose"]);return l.a.createElement(s.a,{"aria-label":"close",className:t.closeButton,onClick:_},l.a.createElement(p.a,null))})),b=Object(o.a)((function(){return{root:{textAlign:"center"}}}))(i.a);function f(e){var t=l.a.useState(!0),_=Object(a.a)(t,2),n=_[0],o=_[1],i=Object(E.f)(),s=Object(r.useState)(e.jobList),u=Object(a.a)(s,2),p=(u[0],u[1],function(){e.onClose(),o(!1)});return l.a.createElement("div",null,l.a.createElement(c.a,{onClose:p,"aria-labelledby":"customized-dialog-title",open:n},l.a.createElement(d,{id:"customized-dialog-title",onClose:p}),l.a.createElement(b,null,l.a.createElement("img",{src:"./success.svg"}),l.a.createElement("p",{style:{color:"#609E2E",fontSize:"25px"}},"Confirmed"),l.a.createElement("div",{style:{color:"black",fontWeight:"bold"}},l.a.createElement("div",null," Approval Request has been successfully sent to DT Admin"),l.a.createElement("div",null," You will be notified once it gets approved"),l.a.createElement("br",null)),l.a.createElement("p",{style:{color:"grey"}},"View the jobs in  ",l.a.createElement(m.a,{color:"secondary",onClick:function(){return i.push("/myJobs",{tabSelected:1})}}," Pending Jobs ")," "),l.a.createElement("p",{style:{color:"grey"}},"Check the approval status in  ",l.a.createElement(m.a,{color:"secondary",onClick:function(){return i.push("/myJobs",{tabSelected:2})}}," Active Jobs "),"  page  and start job "))))}},860:function(module,__webpack_exports__,__webpack_require__){"use strict";var D_DT_ptmsApplication_dev_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(41),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__),formik__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(647),_material_ui_lab_Autocomplete__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(817),_material_ui_core__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(588),_autocomplete_css__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(710),_autocomplete_css__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_autocomplete_css__WEBPACK_IMPORTED_MODULE_5__),AppAutoComplete=function AppAutoComplete(_ref){var options=_ref.options,_ref$required=_ref.required,required=void 0!==_ref$required&&_ref$required,name=_ref.name,label=_ref.label,reload=_ref.reload,kvMapping=_ref.kvMapping,_useState=Object(react__WEBPACK_IMPORTED_MODULE_1__.useState)({q:"",timerId:null,dataset:[]}),_useState2=Object(D_DT_ptmsApplication_dev_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(_useState,2),opts=_useState2[0],setOpts=_useState2[1],renders=react__WEBPACK_IMPORTED_MODULE_1___default.a.useRef(0),intializeList=function intializeList(){if(options&&options.length>0){var ds=options;kvMapping&&(ds=options.map((function(opt){var labEle="opt."+kvMapping.label,labelv=eval(labEle),valEle="opt."+kvMapping.value,val=eval(valEle);return{label:labelv,value:val}}))),setOpts({q:"",dataset:ds,timerId:null}),console.log(ds)}};return Object(react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((function(){intializeList()}),[]),Object(react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((function(){intializeList()}),[reload]),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(formik__WEBPACK_IMPORTED_MODULE_2__.b,{name:name},(function(e){var t=e.form,_=e.field,a=(e.meta,t.setFieldValue);return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_lab_Autocomplete__WEBPACK_IMPORTED_MODULE_3__.a,{value:_.value,placeholder:label,autoHighlight:!0,options:opts.dataset,getOptionLabel:function(e){return e?e.label:""},getOptionSelected:function(e,t){return t.value===e.value},style:{width:300},onChange:function(e,t){return a(name,t||"")},renderInput:function(e){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_4__.a,Object.assign({},e,{label:label}))}}))})))},_unused_webpack_default_export=react__WEBPACK_IMPORTED_MODULE_1___default.a.memo(AppAutoComplete)},922:function(e,t,_){"use strict";_.r(t),_.d(t,"default",(function(){return B}));var a=_(41),n=_(0),r=_.n(n),l=_(592),o=_(742),c=_(806),i=_.n(c),s=_(588),u=_(692),p=_(694),m=_(695),E=_(349),d=_(693),b=_(352),f=_(5),O=_(647),D=(_(860),_(725)),M=_(160),P=(Object(f.a)((function(e){return{root:{},input:{borderRadius:4,position:"relative",backgroundColor:e.palette.background.paper,border:"1px solid #ced4da",width:300,fontSize:15,padding:"26px 15px 5px  20px",transition:e.transitions.create(["border-color","box-shadow"]),fontFamily:['"Segoe UI Regular"'].join(","),"&:focus":{borderRadius:4,borderColor:"grey",boxShadow:"0 0 0 0rem "},color:"grey"}}}))(b.a),{truck:""});function v(e){var t=Object(n.useState)(e.containerData),_=Object(a.a)(t,2),l=_[0],c=(_[1],Object(n.useState)(e.truckOptions)),i=Object(a.a)(c,2),s=i[0],b=(i[1],Object(n.useState)(e.truckNumber)),f=Object(a.a)(b,2),v=(f[0],f[1]),g=Object(n.useState)(P),A=Object(a.a)(g,1)[0];console.log("truckOptions in child",s);var T={label:"label",value:"value"},C="".concat(M.K,"?transporter=").concat("");return r.a.createElement(O.d,{initialValues:A,enableReinitialize:!0},(function(t){return t,r.a.createElement(r.a.Fragment,null,r.a.createElement(O.c,{autoComplete:"off"},r.a.createElement(u.a,{style:{width:"100%",marginLeft:"12px"}},r.a.createElement(p.a,null,r.a.createElement(m.a,null,r.a.createElement(E.a,{variant:"outlined",style:{marginTop:"5px"}},r.a.createElement(d.a,{style:{color:"grey",width:"180px"}},r.a.createElement(o.a,{item:!0,style:{fontSize:"18px",fontWeight:"bold",color:"black"}}," ",l.container_number),r.a.createElement(o.a,{item:!0,style:{fontSize:"13px"}}," ",l.iso_code)),r.a.createElement(d.a,{style:{fontSize:"13px",width:"400px",color:"black",fontWeight:"bold"}},r.a.createElement("img",{src:"./location-pin.svg"}),l.pickupLocation,r.a.createElement("img",{src:"./toFrom.svg"}),r.a.createElement("img",{src:"./location-pin.svg"}),l.dropZone),r.a.createElement(d.a,{style:{fontSize:"13px",color:"grey",width:"180px",borderRight:"1px solid #D3D3D3"}},r.a.createElement(o.a,{item:!0,style:{color:"grey",fontSize:"13px"}},"Date & Time"),r.a.createElement(o.a,{item:!0,style:{fontWeight:"bold",color:"black",fontSize:"13px"}},l.deliveryDate)),r.a.createElement(d.a,{style:{width:"300px"}},r.a.createElement(D.a,{name:"truck",label:"Search by truck number",style:{marginTop:"2px"},kvMapping:T,remoteUrl:C,onSelect:function(t,_,a){console.log("truck selected new",t,"value::",_,"label::",a),function(t){console.log("truck selected",t),v(t),e.onTruckSelect(t,l.container_number)}(_)},options:s}))))))))}))}var g=_(25),A=_(726),T=_(596),C=_(244),h=_(707),I=_(113),k=_(836),L=Object(C.a)((function(e){return{clickableIcon:{color:"grey","&:hover":{color:"red"}},cancelButton:{background:"#dc4e4e",color:"#fff",textTransform:"none",float:"center"},confirmButton:{background:"#4CAB5B",color:"#fff",textTransform:"none",float:"center"}}}));function B(){var e=Object(g.g)(),t=Object(n.useState)(e.state.containerData),_=Object(a.a)(t,2),c=_[0],u=_[1],p=Object(n.useState)(""),m=Object(a.a)(p,2),E=m[0],d=m[1],b=Object(n.useState)([]),f=Object(a.a)(b,2),O=(f[0],f[1],Object(n.useState)([])),D=Object(a.a)(O,2),M=D[0],P=D[1],C=Object(n.useState)(e.state.containerData.length),B=Object(a.a)(C,2),R=B[0],S=B[1],U=L(),W=Object(g.f)(),K=Object(n.useState)(I.e),j=Object(a.a)(K,2),y=j[0],x=j[1],w=Object(n.useState)(I.e),q=Object(a.a)(w,2),z=q[0],F=q[1];return Object(n.useEffect)((function(){console.log("containers unassigned ",R),P(c)}),[]),r.a.createElement(r.a.Fragment,null,z===I.a&&r.a.createElement(k.a,{onClose:function(e){F(I.e),W.push("/myJobs",{tabSelected:1})}}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},0!==R&&r.a.createElement(l.a,{style:{fontSize:"20px",marginTop:"30px",color:"black",fontWeight:"bold"}},r.a.createElement("span",null,"Assign Trucks "),r.a.createElement("span",{style:{fontSize:"15px",color:"black"}},"(",R," containers unassigned)")),0===R&&r.a.createElement(l.a,{style:{fontSize:"20px",marginTop:"30px",color:"black"}},r.a.createElement("span",null,"Assign Trucks "),r.a.createElement("span",{style:{fontSize:"15px",color:"black"}},"(",c.length," containers assigned)"))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement(T.a,{variant:"contained",color:"secondary",style:{float:"right",marginTop:"20px"},disabled:0!==R,className:"float-right",onClick:function(){x(I.a)}},"Continue"))),r.a.createElement("hr",{style:{backgroundColor:"#D3D3D3",border:"0px",height:"1px"}}),r.a.createElement(o.a,{container:!0,direction:"row",spacing:1,alignItems:"flex-start"},r.a.createElement(o.a,{item:!0,xs:10,sm:8},r.a.createElement(o.a,{container:!0,spacing:1,alignItems:"flex-end",style:{marginLeft:"12px"}},r.a.createElement(o.a,{item:!0,xs:4},r.a.createElement(s.a,{id:"input-with-icon-grid",label:"Search with container number",InputLabelProps:{style:{fontSize:15}},fullWidth:!0,onChange:function(e){d(e.target.value)}})),r.a.createElement(o.a,{item:!0},r.a.createElement(i.a,{className:U.clickableIcon,onClick:function(){console.log("search button clicked");var e=E;u(""===E?M:M.filter((function(t){return t.container_number===e})))}})))),r.a.createElement(o.a,{item:!0},r.a.createElement(l.a,{style:{fontSize:"15px",marginTop:"30px",color:"grey"}},"Trucks Available"),r.a.createElement("hr",{style:{backgroundColor:"#D3D3D3",border:"0px",height:"1px"}}))),c.map((function(e,t){return r.a.createElement(v,{containerData:e,key:e.container_number,index:t,truckNumber:e.truckNumber,onTruckSelect:function(e,t){return function(e,t){console.log("containers unassigned ",R),M.find((function(e){return e.container_number===t})).truckNumber?""===e&&S(R+1):e&&S(R-1);var _=M.findIndex((function(e){return e.container_number===t}));M[_].truckNumber=e}(e,t)}})})),r.a.createElement(h.a,{isopen:y===I.a,title:"Send For Token?",children:"Would you like to save the selection of trucks done on each container and send it for token request?",confirmTxt:"Yes",closeTxt:"No",closeButtonCss:U.cancelButton,confirmButtonCss:U.confirmButton,onClose:function(){x(I.e)},onConfirm:function(e){A.a.groupAndSendForApproval({requestContainerList:M}).then((function(e){if(e.isAxiosError)throw new Error(e.status);F(I.a),x(I.e)})).catch((function(){console.log("error")}))}}))}}}]);
//# sourceMappingURL=59.5d69cc7d.chunk.js.map