(this.webpackJsonpptms=this.webpackJsonpptms||[]).push([[61],{666:function(e,t,a){"use strict";var n=a(0),l=a.n(n);a(671);t.a=function(e){var t=e.title,a=e.message,n=e.icon,o=e.position,r=e.showToast;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"notification-container ".concat(o)},l.a.createElement("div",{className:"info-box"},l.a.createElement("div",{className:"icon bg-red"},l.a.createElement("i",{className:"material-icons"},n)),l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"title"},t),l.a.createElement("div",{className:"message"},a)),l.a.createElement("div",{className:"col-md"},l.a.createElement("button",{style:{marginTop:"5px",fontSize:"25px"},type:"button",onClick:function(){r(!1)},className:"close","data-dismiss":"alert","aria-label":"Close"},l.a.createElement("span",{"aria-hidden":"true"},"\xd7"))))))}},671:function(e,t,a){},676:function(e,t,a){"use strict";var n=a(651),l=a(41),o=a(0),r=a.n(o),c=a(647),i=a(672),s=a(669),m=a(736);t.a=r.a.memo((function(e){var t=Object(c.e)(e),a=Object(l.a)(t,3),u=a[0],d=(a[1],a[2],r.a.useRef(0),e.label),p=e.name,f=e.iconColor,g=e.defaultDate,b=(Object(n.a)(e,["label","name","iconColor","defaultDate"]),g||null);Object(o.useEffect)((function(){}),[]);var E=u.value;if(E&&E.length>0){var y=E.split("/")[0],v=E.split("/")[1],x=E.split("/")[2],k=new Date(x,v-1,y);k instanceof Date&&(b=k)}return r.a.createElement(c.a,{name:p},(function(e){var t=e.form,a=e.field,n=t.setFieldValue,l=(a.value,"");return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,{utils:i.a},r.a.createElement(m.a,{fullWidth:!0,label:d,placeholder:d,value:b,variant:"inline",format:"dd/MM/yyyy",autoOk:!0,onChange:function(e){b=e,function(e){if(console.log(e),e&&"Invalid Date"!==e){var t=e.getDate(),a=(e.getMonth(),e.getFullYear());l=t+"/"+(e.getMonth()+1)+"/"+a,n(p,l)}console.log(l)}(e)},margin:"dense",inputVariant:"outlined",InputProps:{endAdornment:null,style:{fontSize:"16px",fontFamily:"Dubai Regular"}},InputLabelProps:{style:{fontSize:"16px",fontFamily:"Dubai Regular"}},KeyboardButtonProps:{style:{fontSize:"16px",color:f,padding:0}}})))}))}))},786:function(e,t,a){"use strict";var n=a(41),l=a(0),o=a.n(l),r=a(672),c=a(669),i=a(736),s=a(60);t.a=o.a.memo((function(e){var t,a=Object(s.f)(),m=a.errors,u=(a.getValues,a.setValue),d=(a.register,a.control),p=Object(l.useState)(null),f=Object(n.a)(p,2),g=f[0],b=f[1];Object(l.useEffect)((function(){var t=d.defaultValuesRef.current[e.name];if(console.log("date "+t),t&&t.length>0){var a=t.split("/")[0],n=t.split("/")[1],l=t.split("/")[2],o=new Date(l,n-1,a);o instanceof Date&&b(o)}}),[]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(s.a,{as:o.a.createElement(c.a,{utils:r.a},o.a.createElement(i.a,{label:e.label,placeholder:e.label,value:g,variant:"inline",format:"dd/MM/yyyy",inputVariant:"outlined",size:"small",autoOk:!0,error:!!m[e.name],helperText:null===(t=m[e.name])||void 0===t?void 0:t.message,onChange:function(t){console.log(t),b(t),function(t){if(console.log(t),t&&"Invalid Date"!==t){var n=t.getDate(),l=(t.getMonth(),t.getFullYear()),o=n+"/"+(t.getMonth()+1)+"/"+l;u(e.name,o),a.trigger(e.name),e.onChange(t)}}(t)},disablePast:!!e.disablePastDate&&e.disablePastDate,InputProps:{endAdornment:null,style:{fontSize:"16px",fontFamily:"Dubai Regular"}},InputLabelProps:{style:{fontSize:"16px",fontStyle:"oblique",fontFamily:"Dubai Regular"}},KeyboardButtonProps:{style:{fontSize:"16px",color:e.iconColor,padding:0}}})),name:e.name,control:d}))}))},849:function(e,t,a){"use strict";a.r(t);var n=a(41),l=a(0),o=a.n(l),r=a(673),c=a(596),i=a(775),s=a(742),m=a(692),u=a(694),d=a(695),p=a(693),f=a(588),g=a(349),b=a(350),E=a(778),y=a(592),v=a(744),x=a.n(v),k=a(787),h=a.n(k),S=a(138),z=a(160),O=a(666),j=(a(672),a(685),a(676),a(60)),C=a(786);t.default=o.a.memo((function(e){var t=o.a.useState(null),a=Object(n.a)(t,2),v=(a[0],a[1],o.a.useState("")),k=Object(n.a)(v,2),D=(k[0],k[1]),N=o.a.useState(""),T=Object(n.a)(N,2),F=(T[0],T[1]),w=Object(l.useState)(0),P=Object(n.a)(w,2),L=P[0],B=P[1],R=Object(l.useState)(!0),V=Object(n.a)(R,2),q=V[0],A=V[1],M=["pdf","doc","png","docx","jpg","jpeg"],_=Object(l.useState)(!1),I=Object(n.a)(_,2),J=I[0],K=I[1],U=Object(l.useState)(!1),W=Object(n.a)(U,2),Y=W[0],H=W[1],G=Object(j.e)({mode:"onChange",reValidateMode:"onChange",defaultValues:""});Object(l.useEffect)((function(){console.log("props in jobCard",e)}));var Q=function(t){t.touched=!0,console.log("validate job:: ",t);var a=0;t.requestContainerList.map((function(e,t){e.tokenOut&&void 0!==e.tokenOutSlotFrom&&void 0!==e.tokenOutSlotTo&&e.tokenOutDate&&e.etokenDto?!0!==e.valid&&(e.valid=!0):(e.valid,e.valid=!1)})),t.requestContainerList.map((function(e,t){!0===e.valid&&a++})),a===t.requestContainerList.length?t.disabled=!1:t.disabled=!0;var n=0,l=0;e.jobs.map((function(e,t){void 0!==e.disabled&&!0===e.touched&&(n+=1,!1===e.disabled&&(l+=1))})),B(L+1),A(n!==l)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(j.b,G,o.a.createElement(c.a,{style:{textTransform:"none",marginLeft:"1120px"},color:"primary",variant:"contained",disabled:q,onClick:function(){console.log("rrrrrr",e.jobs);var t=e.jobs.filter((function(e){return!1===e.disabled}));console.log("list of jobs for server",t);var a={url:"".concat(z.gb),body:t};Object(S.c)(a,!0).then((function(t){console.log("received response",t),A(!0),e.reRender()})).catch((function(e){}))}},"update"),e.jobs&&e.jobs.length>0?e.jobs.map((function(t,a){return o.a.createElement(r.a,{key:t.referenceNumber,style:{width:"1200px",marginTop:"20px"}},o.a.createElement("div",{className:"row"},o.a.createElement(E.a,{style:{width:"2rem",height:"2rem",color:"white",textAlign:"center",marginTop:"5px",backgroundColor:"#0E1B3D",marginLeft:"40px",border:"2px solid #ccc"}},a+1),o.a.createElement("div",{className:"col"},o.a.createElement(y.a,null,"Job Number#",t.referenceNumber)),o.a.createElement("div",{className:"col-md",style:{marginLeft:"900px"}},o.a.createElement(i.a,{style:{color:"black"},onClick:function(){e.onExpandClicked(t),K(!1),H(!1)}}," ",t.open?o.a.createElement(h.a,null):o.a.createElement(x.a,null)," "))),o.a.createElement(s.a,{item:!0,container:!0,xs:12,sm:!0,spacing:1},o.a.createElement(s.a,{item:!0,xs:4,sm:2},o.a.createElement(y.a,{style:{fontSize:"13px",color:"black",marginLeft:"20px"}},"Consignee Name"),o.a.createElement(y.a,{style:{fontSize:"13px",color:"black",marginLeft:"20px"}},t.consigneeName)),o.a.createElement(s.a,{item:!0,xs:4,sm:2},o.a.createElement(y.a,{style:{fontSize:"13px",color:"black"}},"Truck Number"),o.a.createElement(y.a,{style:{fontSize:"13px",color:"black"}},t.vehicleRegNo)),o.a.createElement(s.a,{item:!0,xs:4,sm:2},o.a.createElement(y.a,{style:{fontSize:"13px",color:"black"}},o.a.createElement("img",{src:"./location-pin.svg"})," ",t.dropAddress)),o.a.createElement(s.a,{item:!0,xs:4,sm:2},o.a.createElement(y.a,{style:{fontSize:"13px",color:"black"}},"Requester Company Name"),o.a.createElement(y.a,{style:{fontSize:"13px",color:"black"}},t.requestedBy)),o.a.createElement(s.a,{item:!0,xs:4,sm:2},o.a.createElement(y.a,{style:{fontSize:"13px",color:"black"}},"Contact Person"),o.a.createElement(y.a,{style:{fontSize:"13px",color:"black"}},t.requesterContactName)),o.a.createElement(s.a,{item:!0,xs:4,sm:2},o.a.createElement(y.a,{style:{fontSize:"13px",color:"black"}},"Contact Number"),o.a.createElement(y.a,{style:{fontSize:"13px",color:"black"}},t.requesterContactNumber))),t.open&&o.a.createElement(o.a.Fragment,null,o.a.createElement(m.a,null,o.a.createElement(u.a,null,o.a.createElement(d.a,{style:{borderTop:"1px solid grey"}},o.a.createElement(p.a,{style:{borderBottom:"none"}},o.a.createElement(y.a,{style:{fontSize:"13px",color:"grey"}},"Container Number")),o.a.createElement(p.a,{style:{borderBottom:"none"}},o.a.createElement(y.a,{style:{fontSize:"13px",color:"grey"}},"Declaration#")),o.a.createElement(p.a,{style:{borderBottom:"none"}},o.a.createElement(y.a,{style:{fontSize:"13px",color:"grey"}},"Booking#")),o.a.createElement(p.a,{style:{borderBottom:"none"}},o.a.createElement(y.a,{style:{fontSize:"13px",color:"grey"}},"Pickup")),o.a.createElement(p.a,{style:{borderBottom:"none"}},o.a.createElement(y.a,{style:{fontSize:"13px",color:"grey"}},"Date And Time")),o.a.createElement(p.a,{style:{borderBottom:"none"}},o.a.createElement(y.a,{style:{fontSize:"13px",color:"grey"}},"Token Number")),o.a.createElement(p.a,{style:{borderBottom:"none"}},o.a.createElement(y.a,{style:{fontSize:"13px",color:"grey"}},"Token Slot")),o.a.createElement(p.a,{style:{borderBottom:"none"}},o.a.createElement(y.a,{style:{fontSize:"13px",color:"grey"}},"eToken"))),t.requestContainerList.map((function(e,a){return o.a.createElement(d.a,{key:e.container_number},o.a.createElement(p.a,null,o.a.createElement(y.a,{style:{fontSize:"13px",color:"black"}},e.container_number)),o.a.createElement(p.a,null,o.a.createElement(y.a,{style:{fontSize:"13px",color:"black"}},e.boeNumber)),o.a.createElement(p.a,null,o.a.createElement(y.a,{style:{fontSize:"13px",color:"black"}},e.requestDetailsNumber)),o.a.createElement(p.a,null,o.a.createElement(y.a,{style:{fontSize:"13px",color:"black"}},o.a.createElement("img",{src:"./location-pin.svg"})," ",e.pickupLocation)),o.a.createElement(p.a,null,o.a.createElement(y.a,{style:{fontSize:"13px",color:"black"}},e.date_time)),o.a.createElement(p.a,null,o.a.createElement(f.a,{id:"outlined-basic",label:"Token#",variant:"outlined",size:"small",defaultValue:e.tokenOut,onChange:function(a){e.tokenOut=a.target.value,console.log("blurred",e.tokenOut),Q(t)}})),o.a.createElement(p.a,null,o.a.createElement(s.a,{container:!0},o.a.createElement(s.a,{item:!0,xs:5,style:{marginTop:"20px"}},o.a.createElement(C.a,{name:"dateTime",label:"",iconColor:"#1FA5FF",disablePastDate:!0,onChange:function(a){e.tokenOutDate=G.getValues().dateTime,Q(t),console.log("selected date ::::",a)}})),o.a.createElement(s.a,{item:!0,xs:1},o.a.createElement("hr",{style:{width:"0px",height:"50px",backgroundColor:"#D3D3D3"}})),o.a.createElement(s.a,{item:!0,xs:2},o.a.createElement(f.a,{id:"toTime",type:"time",InputLabelProps:{shrink:!0},inputProps:{size:"small"},defaultValue:e.tokenOutSlotFrom,onChange:function(a){F(a.target.value),e.tokenOutSlotFrom=a.target.value,Q(t)}}),o.a.createElement(f.a,{id:"fromTime",type:"time",size:"small",inputProps:{size:"small"},defaultValue:e.tokenOutSlotTo,onChange:function(a){D(a.target.value),e.tokenOutSlotTo=a.target.value,Q(t)}})))),o.a.createElement(p.a,null,o.a.createElement("label",{htmlFor:e.container_number},o.a.createElement("input",{type:"file",name:e.container_number,id:e.container_number,style:{display:"none"},onChange:function(a){var n=a.target.files[0];a.target.value="",console.log("???????????",e),new Promise((function(e,t){var a=new FileReader;a.onload=function(t){e(t.target.result)},a.onerror=function(e){t(e)},a.readAsDataURL(n)})).then((function(a){var l=a.split(","),o=l[0].replace("data:","").replace(";base64",""),r={};console.log("file type::",o),console.log("file size::",n.size),M.some((function(e){return o.split("/")[1]===e}))?n.size<=5e5?(r.fileContent=l[1],r.fileType=o,r.tokenType="FCL_OUT",r.fileName=n.name,e.etokenDto=r,console.log("container::",e),console.log("etoken::",e.etokenDto),e.upload=!0,Q(t),K(!1),H(!1)):(console.log("file size error"),e.upload=!1,Q(t),K(!0)):(console.log("file format error"),e.upload=!1,Q(t),H(!0))}))}}),!e.upload&&o.a.createElement("img",{src:"./token_upload.svg"}),e.upload&&o.a.createElement("img",{src:"./token_success.svg"}),J&&o.a.createElement(O.a,{icon:"error",title:"File size error",message:"Allowed maximum size is 500 KB",showToast:function(){K(!1)},position:"top-right"}),Y&&o.a.createElement(O.a,{icon:"error",title:"File format not supported",message:"*Only files with the following extensions are allowed *.pdf,.doc,.png,.jpg,.jpeg  ",showToast:function(){H(!1)},position:"top-right"}))))}))))))})):o.a.createElement(g.a,{elevation:5,style:{borderRadius:8,padding:"30px",marginTop:20,minWidth:"760px",minHeight:"100px",color:"#FF7171"}},o.a.createElement(s.a,{container:!0,direction:"row",spacing:5},o.a.createElement(s.a,{item:!0,sm:12,xs:12},o.a.createElement(b.a,{variant:"subtitle1",style:{fontSize:"16px",textAlign:"center"}},o.a.createElement("b",null,"No records found")))))))}))}}]);
//# sourceMappingURL=61.f6e0727b.chunk.js.map