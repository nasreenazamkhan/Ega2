(this.webpackJsonpptms=this.webpackJsonpptms||[]).push([[42],{655:function(e,a,t){"use strict";var l=t(0),r=t.n(l),n=t(673),_=t(713),o=t(699),c=(t(658),t(43)),i=t(116),u=(t(659),t(587)),m=t(75);var s=r.a.memo((function(){var e=Object(c.d)((function(e){return e.messagebar})),a=Object(c.c)(),t=function(t){var l=t.msgClass,n=t.icon;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:l},r.a.createElement("div",{className:"message-icon"},r.a.createElement(u.a,null,n)),r.a.createElement("div",{className:"message-list"},r.a.createElement("ul",null,e.messages.map((function(e,a){return r.a.createElement("li",{key:a},e)})))),r.a.createElement("div",{className:"close-icon",onClick:function(){a(Object(m.a)())}},r.a.createElement(u.a,null,"clear"))))};return console.log(e),r.a.createElement(r.a.Fragment,null,e.show&&!0===e.show&&function(){switch(console.log("IN componenet"),e.messageType){case i.e:return r.a.createElement(r.a.Fragment,null,r.a.createElement(t,{msgClass:"alert-message-box bg-success",icon:"check"}));case i.a:return r.a.createElement(r.a.Fragment,null,r.a.createElement(t,{msgClass:"alert-message-box bg-error",icon:"error"}));case i.c:return r.a.createElement(r.a.Fragment,null,r.a.createElement(t,{msgClass:"alert-message-box bg-info",icon:"info"}));case i.f:return r.a.createElement(r.a.Fragment,null,r.a.createElement(t,{msgClass:"alert-message-box bg-warning",icon:"warning"}));default:return r.a.createElement(r.a.Fragment,null)}}())}));a.a=r.a.memo((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(n.a,null,r.a.createElement(_.a,{title:e.title,className:"page-header"}),r.a.createElement(o.a,null,r.a.createElement(s,null),e.children)))}))},658:function(e,a,t){},659:function(e,a,t){},665:function(e,a,t){"use strict";var l=t(244),r=t(587),n=t(588),_=t(647),o=t(0),c=t.n(o),i=(t(356),t(251)),u=Object(l.a)((function(e){return{txtDiv:{display:"flex"},iconDiv:{width:"25px","& span":{position:"absolute",top:"40%",fontSize:"16px"}},txtField:{}}}));a.a=c.a.memo((function(e){var a=e.required,t=void 0!==a&&a,l=e.name,m=e.label,s=(e.helperText,e.fieldIcon),p=e.placeholder,d=(c.a.useRef(0),u());return Object(o.useEffect)((function(){}),[]),c.a.createElement(c.a.Fragment,null,c.a.createElement(_.a,{name:l},(function(e){var a=e.form,_=e.field,o=e.meta,u=a.setFieldValue,E=!1;o.touched&&o.error&&(E=!0,o.error);var b=null;return b=_.value?c.a.createElement(i.a,{onClick:function(e){u(l,"")}}):null,c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:d.txtDiv},s&&c.a.createElement("div",{className:d.iconDiv},c.a.createElement(r.a,null,s)),c.a.createElement(n.a,Object.assign({},_,{label:m,fullWidth:!0,id:_.name,className:d.txtField,error:E,helperText:E?o.error:"",required:t,placeholder:p,InputProps:{endAdornment:b}}))))})))}))},710:function(e,a,t){},714:function(e,a,t){"use strict";var l=t(591),r=t(592),n=t(602),_=t(727),o=t(595),c=t(647),i=t(0),u=t.n(i);a.a=u.a.memo((function(e){e.multiple;var a=e.options,t=(e.required,e.name),m=e.label,s=e.placeholder,p=e.helperText,d=(e.fieldAction,"");Object(i.useEffect)((function(){d=p}),[]);u.a.useRef(0);return u.a.createElement(u.a.Fragment,null,u.a.createElement(c.a,{name:t},(function(e){e.form;var c=e.field,i=e.meta,E=!1;return i.touched&&i.error?(E=!0,p=i.error):p=d,u.a.createElement(u.a.Fragment,null,u.a.createElement(l.a,{fullWidth:!0},u.a.createElement(r.a,null,m),u.a.createElement(n.a,Object.assign({},c,{label:m,id:t,placeholder:s,error:E}),a.map((function(e,a){return u.a.createElement(_.a,{value:e.value,key:a},e.label)}))),u.a.createElement(o.a,{className:!0===E?"Mui-error":""},p)))})))}))},725:function(module,__webpack_exports__,__webpack_require__){"use strict";var D_DT_ptmsApplication_dev_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(12),D_DT_ptmsApplication_dev_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(41),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__),formik__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(647),_material_ui_lab_Autocomplete__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(817),_material_ui_core__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(350),_material_ui_core__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(588),_material_ui_core__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(802),_autocomplete_css__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(710),_autocomplete_css__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(_autocomplete_css__WEBPACK_IMPORTED_MODULE_8__),_common_HttpService__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(138),AppAutoCompleteAsyc=function AppAutoCompleteAsyc(_ref){var options=_ref.options,_ref$required=_ref.required,required=void 0!==_ref$required&&_ref$required,name=_ref.name,label=_ref.label,helperText=_ref.helperText,_ref$type=_ref.type,type=void 0===_ref$type?"text":_ref$type,remoteUrl=_ref.remoteUrl,kvMapping=_ref.kvMapping,onSelect=_ref.onSelect,_useState=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)({q:"",timerId:null,dataset:[]}),_useState2=Object(D_DT_ptmsApplication_dev_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(_useState,2),opts=_useState2[0],setOpts=_useState2[1],_useState3=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)(!1),_useState4=Object(D_DT_ptmsApplication_dev_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(_useState3,2),loading=_useState4[0],setLoading=_useState4[1],_useState5=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)(!1),_useState6=Object(D_DT_ptmsApplication_dev_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(_useState5,2),refresh=_useState6[0],setRefresh=_useState6[1],renders=react__WEBPACK_IMPORTED_MODULE_2___default.a.useRef(0),intializeList=function intializeList(){if(options&&options.length>0){var ds=options;kvMapping&&(ds=options.map((function(opt){var labEle="opt."+kvMapping.label,labelv=eval(labEle),valEle="opt."+kvMapping.value,val=eval(valEle);return{label:labelv,value:val}}))),setOpts({q:"",dataset:ds,timerId:null}),console.log(ds)}};return Object(react__WEBPACK_IMPORTED_MODULE_2__.useEffect)((function(){}),[]),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_2___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(formik__WEBPACK_IMPORTED_MODULE_3__.b,{name:name},(function(_ref2){var form=_ref2.form,field=_ref2.field,meta=_ref2.meta,setFieldValue=form.setFieldValue,timerId=null,autocompleteSearch=function autocompleteSearch(value){var qurl;setLoading(!0),qurl=-1===remoteUrl.indexOf("?")?remoteUrl+"?q="+"".concat(value):remoteUrl+"&q="+"".concat(value),console.log("url::::",qurl),Object(_common_HttpService__WEBPACK_IMPORTED_MODULE_9__.a)({url:qurl},!1).then((function(e){var dItems=[];console.log(e),dItems=e.map((function(ele){var labEle="ele."+kvMapping.label,labelv=eval(labEle),valEle="ele."+kvMapping.value,val=eval(valEle);return{label:labelv,value:val}})),console.log(dItems),setOpts((function(e){return Object(D_DT_ptmsApplication_dev_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)(Object(D_DT_ptmsApplication_dev_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)({},e),{},{dataset:dItems})})),setLoading(!1)})).catch((function(e){setLoading(!1);var a=[{label:"Unable to Fetch the data: "+e,value:"-3333"}];setOpts((function(e){return Object(D_DT_ptmsApplication_dev_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)(Object(D_DT_ptmsApplication_dev_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)({},e),{},{dataset:a})}))}))},handleChange=function(e,a){setRefresh(!0),null!=a?(setFieldValue(name,a.value),onSelect(name,a.value,a.label)):(e.target.value="",setFieldValue(name,""),onSelect(name,"",""))},onKeyPressInput=function(e,a,t){"click"!==e.type&&(setRefresh(!0),remoteUrl&&""!==a&&(clearTimeout(opts.timerId),timerId=setTimeout((function(){autocompleteSearch(a)}),200),setOpts((function(e){return Object(D_DT_ptmsApplication_dev_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)(Object(D_DT_ptmsApplication_dev_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)({},e),{},{q:a,timerId:timerId})}))))},handleClose=function(e,a){remoteUrl&&setOpts((function(e){return Object(D_DT_ptmsApplication_dev_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)(Object(D_DT_ptmsApplication_dev_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)({},e),{},{dataset:[]})})),console.log("closing"),setRefresh(!1)};return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_2___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_material_ui_lab_Autocomplete__WEBPACK_IMPORTED_MODULE_4__.a,{freeSolo:!0,autoComplete:!1,options:opts.dataset,renderOption:function(e){return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_5__.a,{variant:"body2"},e.label)},getOptionLabel:function(e){return e.label},getOptionSelected:function(e,a){return!0},onChange:handleChange,onInputChange:onKeyPressInput,onClose:handleClose,renderInput:function(e){return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_2___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div",{className:"autoSelect-txt-div"},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__.a,Object.assign({autoComplete:"false"},e,{label:label,variant:"outlined",margin:"dense",InputLabelProps:{style:{fontSize:"16px"}}})),loading&&react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_7__.a,{className:"auto-search-loading-icon"})))}}))})))};__webpack_exports__.a=react__WEBPACK_IMPORTED_MODULE_2___default.a.memo(AppAutoCompleteAsyc)},726:function(e,a,t){"use strict";var l=t(114),r=t(115),n=t(138),_=t(160),o=function(){function e(){Object(l.a)(this,e)}return Object(r.a)(e,[{key:"groupAndSendForApproval",value:function(e){var a={url:_.N,body:e};return Object(n.c)(a,!0).catch((function(e){return e}))}},{key:"fetchTrucksForUserTypes",value:function(){var e={url:"".concat(_.J)};return Object(n.a)(e,!1)}},{key:"fetchTrucksForTransporter",value:function(e){var a={url:"".concat(_.K,"?transporter=").concat(e)};return Object(n.a)(a,!1)}},{key:"sendJobForApproval",value:function(e){var a={url:_.ab,body:e};return Object(n.c)(a,!0).catch((function(e){return e}))}},{key:"fetchTransporters",value:function(){var e={url:_.I};return Object(n.a)(e,!1).catch((function(e){return e}))}}]),e}();a.a=new o},768:function(e,a,t){"use strict";var l=t(0),r=t.n(l),n=(t(769),t(587));a.a=r.a.memo((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"MuiFormLabel-root label-label-text"},e.label),r.a.createElement("div",{className:"label-div"},1===e.labelType&&r.a.createElement("span",{className:"label-txt"},e.value),2===e.labelType&&r.a.createElement("span",{onClick:function(){e.onClick(e.id)},className:"label-txt label-txt-hyperlink"},e.value),3===e.labelType&&r.a.createElement("span",{onClick:function(){e.onClick(e.id)},className:"label-txt label-download"},r.a.createElement(n.a,null,"vertical_align_bottom"),"   ",e.value)))}))},769:function(e,a,t){},840:function(e,a,t){"use strict";var l=t(41),r=t(0),n=t.n(r),_=t(647),o=t(655),c=t(768),i=t(725),u=t(160),m=t(211),s=t(100),p=t(714),d=t(726),E=t(113),b=t(25),v=(t(665),t(248)),f=n.a.memo((function(e){console.log("props",e);if(e.tripData)return n.a.createElement(n.a.Fragment,null,n.a.createElement(v.a,{title:"Confirm Trip",closeTxt:"NO",confirmTxt:"YES",onClose:function(a){console.log("inside close"),e.onClose("NO")},isopen:e.isopen,isConfirm:!0,onConfirm:function(){console.log("inside confirm"),e.onConfirm("YES")}},n.a.createElement("h4",null,"Trip with reference number ",e.tripData.referenceNumber," already exists for the selected time slot and truck.Do you want to add container to existing trip?")))})),D={vehicleRegistrationNo:"",driverCode:"",toTime:"0",fromTime:"0"},M=s.b({vehicleRegistrationNo:s.c().required("Vehicle Registration Number is Required")});a.a=function(e){var a,t=Object(r.useState)(D),s=Object(l.a)(t,2),v=s[0],O=(s[1],Object(r.useState)(E.e)),P=Object(l.a)(O,2),T=P[0],g=P[1],A=Object(r.useState)(),C=Object(l.a)(A,2),h=C[0],N=C[1],R=Object(r.useState)(),I=Object(l.a)(R,2),S=I[0],U=I[1],L=Object(b.f)(),k=e.refVehicleType,B={label:"label",value:"value"},y="".concat(u.K,"/").concat(k),K={label:"label",value:"value"},F="".concat(u.y),W=[{label:"Select",value:"0"},{label:"1AM",value:"1AM"},{label:"2AM",value:"2AM"},{label:"3AM",value:"3AM"},{label:"4AM",value:"4AM"},{label:"5AM",value:"5AM"},{label:"6AM",value:"6AM"},{label:"7AM",value:"7AM"},{label:"8AM",value:"8AM"},{label:"9AM",value:"9AM"},{label:"10AM",value:"10AM"},{label:"11AM",value:"11AM"},{label:"12AM",value:"12AM"},{label:"1PM",value:"1PM"},{label:"2PM",value:"2PM"},{label:"3PM",value:"3PM"},{label:"4PM",value:"4PM"},{label:"5PM",value:"5PM"},{label:"6PM",value:"6PM"},{label:"7PM",value:"7PM"},{label:"8PM",value:"8PM"},{label:"9PM",value:"9PM"},{label:"10PM",value:"10PM"},{label:"11PM",value:"11PM"},{label:"12PM",value:"12PM"}],j=function(t){var l;if("NO"===t){l=[{container_number:e.containerData.container_number,requestBoeNumber:e.containerData.requestBoeNumber,vehicleRegistrationNumber:a.values.vehicleRegistrationNo,driverCode:a.values.driverCode,dropTimeFormatted:e.containerData.dropTimeFormatted,timeSlot:a.values.fromTime+"-"+a.values.toTime,trip:null}]}else"YES"===t&&(l=[{container_number:e.containerData.container_number,vehicleRegistrationNumber:a.values.vehicleRegistrationNo,driverCode:a.values.driverCode,dropTimeFormatted:e.containerData.dropTimeFormatted,timeSlot:a.values.fromTime+"-"+a.values.toTime,trip:h}]);var r={containerList:l,referenceNumber:e.orderId};d.a.saveFormData(r).then((function(e){console.log("Save Success"),U(e.data.dataItems[0])})).catch((function(e){}))},q=function(){return S?(console.log("render truck Name in saved"),n.a.createElement(n.a.Fragment,null,n.a.createElement(c.a,{labelType:1,label:"Vehicle Registration Number",value:S.trip.vehicleRegNo}))):e.containerData.trip&&e.containerData.trip.vehicleRegNo?(console.log("render truck Name if"),n.a.createElement(n.a.Fragment,null,n.a.createElement(c.a,{labelType:1,label:"Vehicle Registration Number",value:e.containerData.trip.vehicleRegNo}))):(console.log("render truck Name else"),n.a.createElement(n.a.Fragment,null,n.a.createElement(i.a,{name:"vehicleRegistrationNo",label:"Vehicle Registration Number",kvMapping:B,remoteUrl:y,onSelect:function(){}})))},x=function(){return S?(console.log("render driver name in saved"),n.a.createElement(n.a.Fragment,null,n.a.createElement(c.a,{labelType:1,label:"DriverName",value:S.trip.driverName}))):e.containerData.trip&&e.containerData.trip.driverName?(console.log("render driver Name if"),n.a.createElement(n.a.Fragment,null,n.a.createElement(c.a,{labelType:1,label:"DriverName",value:e.containerData.trip.driverName}))):(console.log("render driver Name else"),n.a.createElement(n.a.Fragment,null,n.a.createElement(i.a,{name:"driverCode",label:"Driver Code",kvMapping:K,remoteUrl:F,onSelect:function(){}})))},w=function(){return S?(console.log("render driver name in saved"),n.a.createElement(n.a.Fragment,null,n.a.createElement(c.a,{labelType:1,label:"DriverName",value:S.timeSlot}))):e.containerData.timeSlot?n.a.createElement(n.a.Fragment,null,n.a.createElement(c.a,{labelType:1,label:"Time Slot",value:e.containerData.timeSlot})):n.a.createElement(n.a.Fragment,null,n.a.createElement(p.a,{label:"From Time",name:"fromTime",options:W}),n.a.createElement(p.a,{label:"To Time",name:"toTime",options:W}))},V=function(){return S?(console.log("render trip in saved"),n.a.createElement(n.a.Fragment,null,n.a.createElement(c.a,{labelType:1,label:"Trip Reference Number",value:S.trip.referenceNumber}))):e.containerData.trip?n.a.createElement(n.a.Fragment,null,n.a.createElement(c.a,{labelType:1,label:"Trip Reference Number",value:e.containerData.trip.referenceNumber})):n.a.createElement(n.a.Fragment,null)};return n.a.createElement(_.d,{initialValues:v,validationSchema:M,onSubmit:function(a){console.log("values",a);var t={container_number:e.containerData.container_number,vehicleRegistrationNumber:a.vehicleRegistrationNo,dropTime:e.containerData.dropTimeFormatted,timeSlot:a.fromTime+"-"+a.toTime,transactionCode:e.orderId,isoCode:e.containerData.iso_code};console.log("values form",t),d.a.checkForExistingTrip(t).then((function(e){e.data.dataItems[0].referenceNumber?(N(e.data.dataItems[0]),g(E.f)):j("NO")})).catch((function(e){}))},enableReinitialize:!0},(function(t){return a=t,n.a.createElement(n.a.Fragment,null,n.a.createElement(o.a,null,n.a.createElement(_.c,{autoComplete:"off"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-3"},n.a.createElement(c.a,{labelType:1,label:"Request Boe Number",value:e.containerData.requestBoeNumber})),n.a.createElement("div",{className:"col-md-3"},n.a.createElement(c.a,{labelType:1,label:"Container Number",value:e.containerData.container_number})),n.a.createElement("div",{className:"col-md-3"},n.a.createElement(c.a,{labelType:1,label:"Consignee name",value:e.containerData.consigneeName})),n.a.createElement("div",{className:"col-md-3"},n.a.createElement(c.a,{labelType:1,label:"Drop Time",value:e.containerData.dropTimeFormatted}))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-3"},n.a.createElement(c.a,{labelType:1,label:"ISO Code",value:e.containerData.iso_code})),n.a.createElement("div",{className:"col-md-3"},n.a.createElement(q,null)),n.a.createElement("div",{className:"col-md-3"},n.a.createElement(x,null)),n.a.createElement("div",{className:"col-md-3"},n.a.createElement(w,null))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-3"},n.a.createElement(V,null))),n.a.createElement("div",{className:"button-holder"},n.a.createElement("div",{className:"col"},n.a.createElement(m.a,{text:"Back",type:"button",handleClick:function(){L.push("/transporterTasks")}}),S||e.containerData.trip?n.a.createElement("p",null):n.a.createElement(m.a,{text:"Submit",type:"submit",icon:"check"}))),n.a.createElement(f,{isopen:T===E.f,tripData:h,onClose:function(e){j(e),g(E.e)},onConfirm:function(e){j(e),g(E.e)}}))))}))}},889:function(e,a,t){"use strict";t.r(a);var l=t(0),r=t.n(l),n=t(840),_=[{containerNo:"C001"},{containerNo:"C002"},{containerNo:"C003"}];a.default=function(){return r.a.createElement("div",{className:"col-md"},_.map((function(e){return r.a.createElement(n.a,{containerNo:e.containerNo,key:e.containerNo})})))}}}]);
//# sourceMappingURL=42.28802fcc.chunk.js.map